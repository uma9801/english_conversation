# english_conversation

Ver.1.05
    問題文を聞き逃した時のために再度再生ボタンを追加（日常英会話モードでは、フラグ管理を模索中のため未対応）
        関数ft.create_problem_and_play_audio() の戻り値 llm_response_audio をst.session_state.llm_response_audio として保存
            保存した内容を再生する関数ft.replay_problem_audio(st.session_state.llm_response_audio) を作成して対応
                ※現在、音声ファイル再生後にすぐ消している。ファイルを消すタイミングを遅らせれば流用ができて処理が軽くなるが、アプリの終了タイミングによってファイルが残り無限に増えていく恐れがある

Ver.1.04
    モード変更時、st.session_state.memory が初期化されずに会話履歴を引き継ぐことで動作異常を起こす点を、初期化することで対応
        また、モード変更する際に画面にチャット履歴が残る点を、st.session_state.messages を空にした上で st.rerun() を実行し画面をクリア
    ディクテーションにおいて、st.session_state.memory の内容が評価結果に影響を及ぼし、正確な評価結果が得られなくなる事があるため各種フラグの更新時に初期化
    モード変更と英語レベル変更時のフラグ管理を関数化
    UIの文言を修正

Ver.1.03
    シャドーイングの評価結果の生成において、first_flg の判定により初回しかテンプレートの更新が行われなかった箇所を修正（問題文も入力文も毎回変わる）
    ft.create_evaluation において、引数が空でユーザーの音声入力を渡しておらず評価ができなくなるケースを改修（日常英会話→シャドーイングのモード変更時に発生）

Ver.1.02
    テンプレートに {englv} を組み込んだ上で、英語レベル変更時に各フラグをリセットし、選択したレベルが反映されるように改修

Ver.1.01
    ログ取得を追加
    ボタン名称を整合性が取れるように修正

Ver.1.00
    コードをダウンロードし、試験的に実行


その他改善アイデア
    会話履歴で操作ボタンが隠れるのでサイドバー表示にする
    任意のタイミングで日本語訳が得られるようにする
    発言に対して、修正後の文章表示だけでなく、発言内容そのものも表示できたら良い。また、修正した内容の解説も欲しい。
    低速モードの0.6が非常に聞き取りづらい
    各モードで、AIの発音をもう一度再生するボタンをつくる
    回答文章の表示と発話を同時にストリーミングする機能を増やす